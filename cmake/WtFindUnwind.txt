FIND_PATH(UNWIND_INCLUDE libunwind.h
  ${UNWIND_PREFIX}/include
  /usr/include
)

FIND_LIBRARY(UNWIND_LIB
  NAMES
      unwind
  PATHS
      ${UNWIND_PREFIX}/lib
      /usr/lib
  )

IF(UNWIND_INCLUDE AND UNWIND_LIB)
  SET(UNWIND_FOUND TRUE)
  SET(UNWIND_INCLUDE_DIRS ${UNWIND_INCLUDE})
  SET(UNWIND_LIBRARIES ${UNWIND_LIB})
ELSE(UNWIND_INCLUDE AND UNWIND_LIB)
  MESSAGE(STATUS "")
  MESSAGE(STATUS "Libunwind not found. Fetching content inplace.")
  MESSAGE(STATUS "")
  FetchContent_Declare(
    unwind
    GIT_REPOSITORY git://git.sv.gnu.org/libunwind.git
    GIT_SHALLOW TRUE)
  FetchContent_MakeAvailable(unwind)
  SET(UNWIND_FOUND FALSE)
ENDIF(UNWIND_INCLUDE AND UNWIND_LIB)
